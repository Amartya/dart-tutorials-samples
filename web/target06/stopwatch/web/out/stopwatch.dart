// Auto-generated from stopwatch.html.
// DO NOT EDIT.

library stopwatch_html;

import 'dart:html' as autogenerated;
import 'dart:svg' as autogenerated_svg;
import 'package:web_ui/web_ui.dart' as autogenerated;
import 'dart:html';
import 'dart:async';
import 'package:web_ui/watcher.dart' as watchers;


// Original code


String counter='00:00';
Stopwatch mywatch = new Stopwatch();

ButtonElement stopButton;
ButtonElement startButton;
ButtonElement resetButton;

void main() {
  startButton = query("#startbutton");
  stopButton = query("#stopbutton");
  stopButton.disabled = true;
  resetButton = query("#resetbutton");
  resetButton.disabled = true;
}

void startwatch() {
  mywatch.start();
  var oneSecond = new Duration(seconds:1);
  var timer = new Timer.repeating(oneSecond, updateTime);
  startButton.disabled = true;
  stopButton.disabled = false;
  resetButton.disabled = true;
}

void stopwatch() {
  mywatch.stop();
  startButton.disabled = false;
  resetButton.disabled = false;
  stopButton.disabled = true;
}

void resetwatch() {
  mywatch.reset();
  counter = '00:00';
  resetButton.disabled = true;
}

void updateTime(Timer t) {
  var s = mywatch.elapsedMilliseconds~/1000;
  var m = 0;
  
  if (s >= 60) { m = s ~/ 60; s = s % 60; }
    
  String minute = (m <= 9) ? '0$m' : '$m';
  String second = (s <= 9) ? '0$s' : '$s';
  counter = '$minute:$second';
  watchers.dispatch();
}
// Additional generated code
void init_autogenerated() {
  var _root = autogenerated.document.body;
  var __e1, __resetbutton, __startbutton, __stopbutton, __stopwatch;
  var __t = new autogenerated.Template(_root);
  __stopwatch = _root.query('#stopwatch');
  __e1 = __stopwatch.query('#__e-1');
  var __binding0 = __t.contentBind(() => counter, false);
  __e1.nodes.addAll([new autogenerated.Text('\n      '),
      __binding0,
      new autogenerated.Text('\n      ')]);
  __startbutton = __stopwatch.query('#startbutton');
  __t.listen(__startbutton.onClick, ($event) { startwatch(); });
  __stopbutton = __stopwatch.query('#stopbutton');
  __t.listen(__stopbutton.onClick, ($event) { stopwatch(); });
  __resetbutton = __stopwatch.query('#resetbutton');
  __t.listen(__resetbutton.onClick, ($event) { resetwatch(); });
  __t.create();
  __t.insert();
}

//@ sourceMappingURL=stopwatch.dart.map