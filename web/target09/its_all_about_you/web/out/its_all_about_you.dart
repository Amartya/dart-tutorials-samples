// Auto-generated from its_all_about_you.html.
// DO NOT EDIT.

library its_all_about_you_html;

import 'dart:html' as autogenerated;
import 'dart:svg' as autogenerated_svg;
import 'package:web_ui/web_ui.dart' as autogenerated;

import 'dart:html';

import 'dart:json' as json;


// Original code
String intAsJson;
String doubleAsJson;
String stringAsJson;
String listAsJson;
String boolAsJson;
String mapAsJson;

// Data input as strings, bound to input fields
String favoriteNumber='';
String valueOfPi='';
String horrorScope='';
String favOne='';
String favTwo='';
String favThree='';
String chocolate='';

void showJson() {
  // Typed data to convert to JSON
  num favNum = int.parse(favoriteNumber);
  num pi = double.parse(valueOfPi);
  var anElement = query('#true');
  bool choco = anElement.checked ? true : false;
  
  List<String> favoriteThings = [ favOne, favTwo, favThree ];

  Map formData = {
    'favoriteNumber': favNum,
    'valueOfPi': pi,
    'chocolate': choco,
    'horrorScope': horrorScope,
    'favoriteThings': favoriteThings
  };

  // Convert everything to JSON
  intAsJson = json.stringify(favNum);          // int
  doubleAsJson = json.stringify(pi);           // double
  boolAsJson = json.stringify(choco);          // boolean
  stringAsJson = json.stringify(horrorScope);  // string
  listAsJson = json.stringify(favoriteThings); // list of strings
  mapAsJson = json.stringify(formData);        // map with string keys
                                               // and mixed values
}

void main() {
  populateFromJson();
  showJson();
}

void populateFromJson() {

String jsonDataAsString = '''
{ "favoriteNumber":44,
  "valueOfPi":3.141592,
  "chocolate":true,
  "horrorScope":"virgo",
  "favoriteThings":["raindrops",
                    "whiskers",
                    "mittens"]
}
''';

  Map jsonData = json.parse(jsonDataAsString);
  
  favoriteNumber = jsonData['favoriteNumber'].toString();
  valueOfPi = jsonData['valueOfPi'].toString();
  horrorScope = jsonData['horrorScope'];
  favOne = jsonData['favoriteThings'][0];
  favTwo = jsonData['favoriteThings'][1];
  favThree = jsonData['favoriteThings'][2];

  if (jsonData['chocolate']) {
    var anElement = query('#true');
    anElement.checked = true;
  } else {
    var anElement = query('#false');
    anElement.checked = true;
  }
}


// Additional generated code
void init_autogenerated() {
  var _root = autogenerated.document.body;
  var __e0, __e10, __e11, __e13, __e15, __e2, __e3, __e5, __e6, __e8, __e9, __false, __mapasjson, __true;

  var __t = new autogenerated.Template(_root);
  __e0 = _root.query('#__e-0');
  __t.listen(__e0.onChange, ($event) { showJson(); });
  __t.listen(__e0.onInput, ($event) { favoriteNumber = __e0.value; });
  __t.oneWayBind(() => (favoriteNumber), (e) { __e0.value = e; }, false);
  __e2 = _root.query('#__e-2');
  var __binding1 = __t.contentBind(() => ( intAsJson ));
  __e2.nodes.addAll([
    new autogenerated.Text(' '),
    __binding1,
    new autogenerated.Text(' ')
  ]);
  __e3 = _root.query('#__e-3');
  __t.listen(__e3.onChange, ($event) { showJson(); });
  __t.listen(__e3.onInput, ($event) { valueOfPi = __e3.value; });
  __t.oneWayBind(() => (valueOfPi), (e) { __e3.value = e; }, false);
  __e5 = _root.query('#__e-5');
  var __binding4 = __t.contentBind(() => ( doubleAsJson ));
  __e5.nodes.addAll([
    new autogenerated.Text(' '),
    __binding4,
    new autogenerated.Text(' ')
  ]);
  __e6 = _root.query('#__e-6');
  __t.listen(__e6.onChange, ($event) { showJson(); });
  __t.listen(__e6.onInput, ($event) { horrorScope = __e6.value; });
  __t.oneWayBind(() => (horrorScope), (e) { __e6.value = e; }, false);
  __e8 = _root.query('#__e-8');
  var __binding7 = __t.contentBind(() => ( stringAsJson ));
  __e8.nodes.addAll([
    new autogenerated.Text(' '),
    __binding7,
    new autogenerated.Text(' ')
  ]);
  __e9 = _root.query('#__e-9');
  __t.listen(__e9.onChange, ($event) { showJson(); });
  __t.listen(__e9.onInput, ($event) { favOne = __e9.value; });
  __t.oneWayBind(() => (favOne), (e) { __e9.value = e; }, false);
  __e10 = _root.query('#__e-10');
  __t.listen(__e10.onChange, ($event) { showJson(); });
  __t.listen(__e10.onInput, ($event) { favTwo = __e10.value; });
  __t.oneWayBind(() => (favTwo), (e) { __e10.value = e; }, false);
  __e11 = _root.query('#__e-11');
  __t.listen(__e11.onChange, ($event) { showJson(); });
  __t.listen(__e11.onInput, ($event) { favThree = __e11.value; });
  __t.oneWayBind(() => (favThree), (e) { __e11.value = e; }, false);
  __e13 = _root.query('#__e-13');
  var __binding12 = __t.contentBind(() => ( listAsJson ));
  __e13.nodes.addAll([
    new autogenerated.Text(' '),
    __binding12,
    new autogenerated.Text(' ')
  ]);
  __true = _root.query('#true');
  __t.listen(__true.onChange, ($event) { showJson(); });
  __false = _root.query('#false');
  __t.listen(__false.onChange, ($event) { showJson(); });
  __e15 = _root.query('#__e-15');
  var __binding14 = __t.contentBind(() => ( boolAsJson ));
  __e15.nodes.addAll([
    new autogenerated.Text(' '),
    __binding14,
    new autogenerated.Text(' ')
  ]);
  __mapasjson = _root.query('#mapasjson');
  var __binding16 = __t.contentBind(() => ( mapAsJson ));
  __mapasjson.nodes.add(__binding16);
  

  __t.create();
  __t.insert();
}
