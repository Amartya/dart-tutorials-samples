// Auto-generated from its_all_about_you.html.
// DO NOT EDIT.

library its_all_about_you_html;

import 'dart:html' as autogenerated;
import 'dart:svg' as autogenerated_svg;
import 'package:web_ui/web_ui.dart' as autogenerated;

import 'dart:html';

import 'dart:json' as JSON;


// Original code
String intasjson;
String doubleasjson;
String stringasjson;
String listasjson;
String boolasjson;
String mapasjson;

// Data input as strings, bound to input fields
String favoritenumber='';
String valueofpi='';
String horrorscope='';
String favone='';
String favtwo='';
String favthree='';
String chocolate='';

void showJSON() {
  
  // typed data to convert to JSON
  num favnum = int.parse(favoritenumber);
  num pi = double.parse(valueofpi);
  var anElement = query('#true');
  bool choco = anElement.checked ? true : false;
  
  List<String> favoritethings = [ favone, favtwo, favthree ];

  Map formdata = {
    'favoritenumber': favnum,
    'valueofpi': pi,
    'chocolate': choco,
    'horrorscope': horrorscope,
    'favoritethings': favoritethings
  };

  // convert everything to JSON
  intasjson = JSON.stringify(favnum);
  doubleasjson = JSON.stringify(pi);
  boolasjson = JSON.stringify(choco);
  stringasjson = JSON.stringify(horrorscope);
  listasjson = JSON.stringify(favoritethings);
  mapasjson = JSON.stringify(formdata);
}

void main() {
  populateFromJSON();
  showJSON();
}

void populateFromJSON() {

String jsondataasstring = '''
{ "favoritenumber":44,
  "valueofpi":3.141592,
  "chocolate":true,
  "horrorscope":"virgo",
  "favoritethings":["raindrops",
                    "whiskers",
                    "mittens"]
}
''';

  Map jsondata = JSON.parse(jsondataasstring);
  
  favoritenumber = jsondata['favoritenumber'].toString();
  valueofpi = jsondata['valueofpi'].toString();
  horrorscope = jsondata['horrorscope'];
  favone = jsondata['favoritethings'][0];
  favtwo = jsondata['favoritethings'][1];
  favthree = jsondata['favoritethings'][2];

  if (jsondata['chocolate']) {
    var anElement = query('#true');
    anElement.checked = true;
  } else {
    var anElement = query('#false');
    anElement.checked = true;
  }
}


// Additional generated code
void init_autogenerated() {
  var _root = autogenerated.document.body;
  var __e0, __e10, __e11, __e13, __e15, __e2, __e3, __e5, __e6, __e8, __e9, __false, __mapasjson, __true;

  var __t = new autogenerated.Template(_root);
  __e0 = _root.query('#__e-0');
  __t.listen(__e0.onChange, ($event) { showJSON(); });
  __t.listen(__e0.onInput, ($event) { favoritenumber = __e0.value; });
  __t.oneWayBind(() => (favoritenumber), (e) { __e0.value = e; }, false);
  __e2 = _root.query('#__e-2');
  var __binding1 = __t.contentBind(() => ( intasjson ));
  __e2.nodes.addAll([
    new autogenerated.Text(' '),
    __binding1,
    new autogenerated.Text(' ')
  ]);
  __e3 = _root.query('#__e-3');
  __t.listen(__e3.onChange, ($event) { showJSON(); });
  __t.listen(__e3.onInput, ($event) { valueofpi = __e3.value; });
  __t.oneWayBind(() => (valueofpi), (e) { __e3.value = e; }, false);
  __e5 = _root.query('#__e-5');
  var __binding4 = __t.contentBind(() => ( doubleasjson ));
  __e5.nodes.addAll([
    new autogenerated.Text(' '),
    __binding4,
    new autogenerated.Text(' ')
  ]);
  __e6 = _root.query('#__e-6');
  __t.listen(__e6.onChange, ($event) { showJSON(); });
  __t.listen(__e6.onInput, ($event) { horrorscope = __e6.value; });
  __t.oneWayBind(() => (horrorscope), (e) { __e6.value = e; }, false);
  __e8 = _root.query('#__e-8');
  var __binding7 = __t.contentBind(() => ( stringasjson ));
  __e8.nodes.addAll([
    new autogenerated.Text(' '),
    __binding7,
    new autogenerated.Text(' ')
  ]);
  __e9 = _root.query('#__e-9');
  __t.listen(__e9.onChange, ($event) { showJSON(); });
  __t.listen(__e9.onInput, ($event) { favone = __e9.value; });
  __t.oneWayBind(() => (favone), (e) { __e9.value = e; }, false);
  __e10 = _root.query('#__e-10');
  __t.listen(__e10.onChange, ($event) { showJSON(); });
  __t.listen(__e10.onInput, ($event) { favtwo = __e10.value; });
  __t.oneWayBind(() => (favtwo), (e) { __e10.value = e; }, false);
  __e11 = _root.query('#__e-11');
  __t.listen(__e11.onChange, ($event) { showJSON(); });
  __t.listen(__e11.onInput, ($event) { favthree = __e11.value; });
  __t.oneWayBind(() => (favthree), (e) { __e11.value = e; }, false);
  __e13 = _root.query('#__e-13');
  var __binding12 = __t.contentBind(() => ( listasjson ));
  __e13.nodes.addAll([
    new autogenerated.Text(' '),
    __binding12,
    new autogenerated.Text(' ')
  ]);
  __true = _root.query('#true');
  __t.listen(__true.onChange, ($event) { showJSON(); });
  __false = _root.query('#false');
  __t.listen(__false.onChange, ($event) { showJSON(); });
  __e15 = _root.query('#__e-15');
  var __binding14 = __t.contentBind(() => ( boolasjson ));
  __e15.nodes.addAll([
    new autogenerated.Text(' '),
    __binding14,
    new autogenerated.Text(' ')
  ]);
  __mapasjson = _root.query('#mapasjson');
  var __binding16 = __t.contentBind(() => ( mapasjson ));
  __mapasjson.nodes.add(__binding16);
  

  __t.create();
  __t.insert();
}
